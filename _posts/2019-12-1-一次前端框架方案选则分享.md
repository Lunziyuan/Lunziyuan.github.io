---
layout: post
title: 一次前端框架方案选择分享
---

&ensp;&ensp;&ensp;&ensp;最近项目要拓展一个新的站点，要求是SEO友好，上线后各大搜索引擎要能够搜索得到在网站内入驻的各个商家的详情页，商家清单是动态的。公司内之前没有做过这种要动态SEO的站点，所以在正式开发之前，让我先做一下调研，也就是技术选项。（当然最后落地开发也是我😂）&ensp;&ensp;&ensp;&ensp;

&ensp;&ensp;&ensp;&ensp;首先SEO的原理大概是，各大搜索引擎的爬虫抓取各个站点的内容，收集入库。然后用户检索时，从库中找到相关度最高的一批站点返回。所以SEO的关键就是，要让爬虫能够爬到你的内容，让搜索引擎知道你站点的存在。然后问题来了，“截至目前，Google 和 Bing 可以很好对同步 JavaScript 应用程序进行索引。在这里，同步是关键。如果你的应用程序初始展示 loading 菊花图，然后通过 Ajax 获取内容，抓取工具并不会等待异步完成后再行抓取页面内容”。拿“公司详情页”来举例，我们平常的做法是在页面加载完成后（比如vue的mounted、react的compontentDidMount），通过请求获取某个公司的详情，再重新渲染页面。所以按照这个做法，爬虫完全不知道这个页面是做什么的，因为他在浏览器拿到公司详情之前（接口返回前）就已经离开了，这样我们的公司详情页就不被搜索引擎知道，自然不会被相应的关键词检索到。所以我们要解决的问题就是，怎么让爬虫看到我们想给他看到的内容。两个思路，1.让爬虫等到我们的请求返回后，再让它走😂。问题就是爬虫不是我们能控制的，不过据说google已经可以抓取站点的异步内容，只是对应SEO的权重较轻。2.同步输出最终的html内容，也就是我们常说的「同构」。&ensp;&ensp;&ensp;&ensp;

&ensp;&ensp;&ensp;&ensp;nodejs出现之前有两种解决方式，一是做一动一静两套页面，服务器判断请求来自蜘蛛就呈现静态页，否则呈现动态页；二是服务器架设虚拟浏览器软件，请求过来了先让虚拟浏览器跑一遍，再将得到的静态页面返回给客户端，两种方式都不咋地。有了nodejs后主流做法是前后端同构方案，即一套代码在浏览器端和node端都可以运行，从而可以先在node端请求数据渲染模板，然后将渲染结果返回给浏览器最终呈现，是目前最完美的前后端分离+SEO解决方案。&ensp;&ensp;&ensp;&ensp;